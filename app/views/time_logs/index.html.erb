<h1>Tasks#index</h1>

<% @bill_dates.each do |bill_date| %>
    <%= link_to bill_date.date, time_logs_path(:date => bill_date.date ) %><br/>
<% end %>

<%= @date.date %>

<table class="timesheet">
  <thead>
  <tr>
    <td>No.</td>
    <td>Time</td>
    <td>Title</td>
    <td>Duration</td>
    <td>Actions</td>
  </tr>
  </thead>
  <tbody>
  <% @time_logs.each do |log| %>
      <tr class="<%= cycle("odd", "even") %>">
        <td><%= log.position %></td>
        <td><%= log.start_time.strftime("%H:%M") %></td>
        <td><%= log.title %></td>
        <td><%= log.duration.blank? ? '' : distance_of_time_in_words(log.start_time, log.end_time, true) %></td>
        <td>
          <%= link_to 'Edit', edit_time_log_path(log), :method => :get %>
          <%= link_to 'Delete', time_log_path(log), :method => :delete %>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>



Finish at: <%= @date.finished_at %>

<% form_tag finish_time_log_path(@date), :method => :post do %>
   <%=  select_hour(Time.now, :field_name => :hours)  %>
    <%=  select_minute(Time.now, :field_name => :hours)  %>


<%= submit_tag "Finish Now" %>
<% end %>
<br/>
Total : <%= distance_of_time_in_words(@time_logs.first.start_time, @time_logs.last.end_time, true) %>



<%= form_for @time_log, :as => :time_log, :html => {:method => (@time_log.valid? ? :put : :post)} do |f| %>
    <%= hidden_field_tag :bill_date_id, @date.id %>
    <%= render :partial => 'form', :locals => {:f => f} %>

<% end %>